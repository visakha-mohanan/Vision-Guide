<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Blindness Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    
    <div class="container py-5 text-center">
        <h1 class="mb-4">Ishihara Color Blindness Test</h1>
        <p class="lead">Look at each plate and try to identify the number or pattern you see.</p>
        
        <div id="test-content" class="mt-5">
            <img id="ishihara-plate" class="img-fluid rounded shadow" style="max-width:400px;" src="" alt="Ishihara Plate">
            <h3 id="plate-number" class="mt-3">Plate 1 of 12</h3>
            
            <button id="next-button" class="btn btn-primary btn-lg mt-4">Next Plate</button>
            <button id="finish-button" class="btn btn-success btn-lg mt-4" style="display:none;">Finish Test</button>
        </div>
        
        <div id="results" class="mt-5" style="display:none;">
            <h2>Test Complete!</h2>
            <p>Your results will be displayed here.</p>
        </div>
        
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const plates = [
                "{{ url_for('static', filename='images/plate1.png') }}",
                "{{ url_for('static', filename='images/plate2.png') }}",
                "{{ url_for('static', filename='images/plate3.png') }}"
                // Add more plate images here
            ];
            let currentPlateIndex = 0;
            const plateImage = document.getElementById('ishihara-plate');
            const plateNumber = document.getElementById('plate-number');
            const nextButton = document.getElementById('next-button');
            const finishButton = document.getElementById('finish-button');

            function showCurrentPlate() {
                plateImage.src = plates[currentPlateIndex];
                plateNumber.textContent = `Plate ${currentPlateIndex + 1} of ${plates.length}`;
                if (currentPlateIndex === plates.length - 1) {
                    nextButton.style.display = 'none';
                    finishButton.style.display = 'inline-block';
                }
            }

            nextButton.addEventListener('click', () => {
                currentPlateIndex++;
                if (currentPlateIndex < plates.length) {
                    showCurrentPlate();
                }
            });

            finishButton.addEventListener('click', () => {
                document.getElementById('test-content').style.display = 'none';
                document.getElementById('results').style.display = 'block';
            });
            
            // Show the first plate when the page loads
            showCurrentPlate();
        });
    </script>
</body>
</html>